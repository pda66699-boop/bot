# Scoring Rules (Adizes Test)

## 1) Итоговые баллы по стадиям
- Для каждой стадии `S`:
  - `StageScore[S] = Σ scores[S]` по всем 24 вопросам (по выбранным вариантам).
- Итоговый профиль: 8 значений `StageScore` в порядке стадий:
  - `Младенчество, Давай-давай, Юность, Расцвет, Стабильность, Аристократизм, Ранний бюрократизм, Бюрократия`.

## 2) Победитель
- `Winner = stage` с максимальным `StageScore`.
- Основная стадия = `Winner`.

## 3) Confidence (уверенность)
- Обозначения:
  - `W` = балл победителя.
  - `R` = балл второго места.
  - `T` = сумма баллов всех стадий.
  - `Margin = W - R`.
- Формула:
  - `Confidence = round(100 * (0.7 * Margin / max(W,1) + 0.3 * W / max(T,1)))`.
  - Ограничить в диапазоне `0..100`.

## 4) Tie-break (если равенство)
1. Если `W == R`, сравнить tied-стадии по сумме баллов в вопросах `Q10–Q12` (`kpi_contour`): выше сумма — победитель.
2. Если снова равенство, выбрать стадию, ближайшую к центру профиля:
   - индексы стадий `1..8`,
   - `Center = Σ(StageScore[i] * i) / Σ(StageScore[i])`,
   - победитель — tied-стадия с минимальным `|i - Center|`.
3. Если равенство сохраняется, выбрать более раннюю стадию (меньший индекс).

## 5) Дополнительные индексы (0–100)

### 5.1 Зависимость от собственника
- Вопросы: `Q07, Q08, Q09`.
- Маппинг вариантов: `A=3, B=2, C=1, D=0` (чем выше, тем выше зависимость).
- `OwnerDependencyIndex = round(100 * Sum / 9)`.

### 5.2 Формализация процессов
- Вопросы: `Q04, Q05, Q06`.
- Маппинг вариантов: `A=0, B=1, C=2, D=3` (чем выше, тем выше формализация).
- `ProcessFormalizationIndex = round(100 * Sum / 9)`.

### 5.3 Управленческий контур
- Вопросы: `Q10, Q11, Q12`.
- Маппинг вариантов: `A=0, B=1, C=3, D=1` (учитывается не формальность, а рабочий контур управления).
- `ManagementContourIndex = round(100 * Sum / 9)`.
